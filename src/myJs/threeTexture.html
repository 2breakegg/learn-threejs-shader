<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <script type="x-shader/x-vertex" id="vertexshader">

			attribute float size;
			attribute vec3 customColor;

      varying vec4 objPos;
      varying vec4 modelPos;

			void main() {

      mat4 t = mat4(  
        cos(1.57), 0., sin(1.57), 0.,
        0., 1., 0., 0.,
        -sin(1.57), 0., cos(1.57), 0.,
        0., 0., 0., 1.
      );

      t = mat4(  
        1., 0., 0., 0.,
        0., 1., 0., 0.,
        0., 0., 1., 0.,
        modelViewMatrix[3].x, modelViewMatrix[3].y, modelViewMatrix[3].z, 1.
      );


// modelViewMatrix
				vec4 mvPosition = t * vec4( position*2., 1.0 );

				//gl_PointSize = size * ( 300.0 / -mvPosition.z );

        objPos = vec4(position,1.);
        modelPos = modelMatrix * objPos;

				gl_Position = projectionMatrix * mvPosition;

			}

  </script>
  <script type="x-shader/x-fragment" id="fragmentshader">

			uniform vec3 color;
			uniform sampler2D textTexture;

      varying vec4 objPos;
      varying vec4 modelPos;

			void main() {
        vec2 uv = (objPos.xy+.5);

				gl_FragColor = texture2D( textTexture, uv );
        // gl_FragColor=vec4(1.,1.,1.,2.)*.5 + gl_FragColor;
        float a = dot(gl_FragColor , vec4(0.299,0.587,0.114,0.));
        gl_FragColor= vec4(gl_FragColor.xyz,a)*0.5;
			}

  </script>
  <script src="../build/three.js"></script>
  <script src="../../node_modules/three/examples/js/controls/OrbitControls.js"></script>
  <script src="./threeTexture.js"></script>
</body>
</html>